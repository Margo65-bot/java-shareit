CREATE TABLE IF NOT EXISTS USERS
(
    ID BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    NAME VARCHAR(100) NOT NULL,
    EMAIL VARCHAR(50) NOT NULL,
    CONSTRAINT USERS_UNIQUE_EMAIL UNIQUE (EMAIL)
);

CREATE TABLE IF NOT EXISTS ITEMS
(
    ID BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    NAME VARCHAR(200) NOT NULL,
    DESCRIPTION VARCHAR(300) NOT NULL,
    AVAILABLE BOOLEAN NOT NULL,
    USER_ID BIGINT NOT NULL REFERENCES USERS (ID) ON DELETE CASCADE ON UPDATE RESTRICT
);

CREATE TABLE IF NOT EXISTS COMMENTS
(
    ID BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    TEXT VARCHAR(1000) NOT NULL,
    USER_ID BIGINT NOT NULL REFERENCES USERS (ID) ON DELETE CASCADE ON UPDATE RESTRICT,
    ITEM_ID BIGINT NOT NULL REFERENCES ITEMS (ID) ON DELETE CASCADE ON UPDATE RESTRICT,
    CREATED TIMESTAMP WITHOUT TIME ZONE NOT NULL
);

CREATE TABLE IF NOT EXISTS BOOKINGS
(
    ID BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    START_DATE TIMESTAMP WITHOUT TIME ZONE NOT NULL,
    END_DATE TIMESTAMP WITHOUT TIME ZONE NOT NULL,
    STATE VARCHAR(15) NOT NULL,
    USER_ID BIGINT NOT NULL REFERENCES USERS (ID) ON DELETE CASCADE ON UPDATE RESTRICT,
    ITEM_ID BIGINT NOT NULL REFERENCES ITEMS (ID) ON DELETE CASCADE ON UPDATE RESTRICT
);
